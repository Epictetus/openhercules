:javascript
  App.data.list = #{@list.to_json}
  App.data.listShares = #{owner?(@list) ? JSON.generate(list_shares(@list)) : "null"}
  App.data.user = #{current_user.to_json}
  App.data.permission = '#{permission_for(@list)}'
  App.data.anonymous  = #{anonymous? ? "true" : "false"}
  App.setup()

#properties
  %h2
    %span.name= @list.name
    %ul.pull-right.page-selector
      - if owner?(@list)
        %li.btn.delete{:title => "Delete"}
          %li.separator &bull;
      %li.btn.clone{      "data-page-name" => "clone",    :title => "Clone"}
      - if permission_for(@list) == ListPermissions::OWNER
        %li.btn.settings{   "data-page-name" => "settings", :title => "Settings"}
      %li.btn.list.active{"data-page-name" => "list",     :title => "List"}

  .description
    = @list.description
.row
  #pages.span
    .row
      #app.page.span14
      - if permission_for(@list) == ListPermissions::OWNER
        #properties-form.page.span14
          %h3 List Settings
          %form.form-stacked
            = render :partial => 'form'          
          %h4 Access
          - if anonymous?
            .alert-message.block-message
              %p Once you've signed up, your Access settings will be saved. In the mean time, the interface will continue to work so you can get a feel for it.

          %table#access
            %thead
              %tr
                %th User
                %th Read
                %th Read + Write
                %th No Access
            %tbody
              %tr.everyone
                %td everyone
                %td.option.read{:class => ("selected" if @list.global_permission == ListPermissions::READ)}
                %td.option.read-write{:class => ("selected" if @list.global_permission == ListPermissions::WRITE)}
                %td.option.none{:class => ("selected" if @list.global_permission == ListPermissions::NONE)}
          %p Enter username to share this list
          %input#username
      #clone.page.span14
        %h3 Clone List
        = form_tag clone_list_path(@list), :method => "put", :class => "form-stacked" do
          = render :partial => 'form'
          %input.btn.primary{:type => "submit", :value => "Clone List"}
        
  
#commands
  %p Commands
  %table
    %tr
      %td <span class="key">enter</span>
      %td save current line and add new line below
    %tr
      %td <span class="key">shift</span> + <span class="key">enter</span>
      %td save current line and add new line above
    %tr
      %td <span class="key">ctrl</span> + <span class="key">enter</span>
      %td save current line and add new line, indented
    %tr
      %td <span class="key">esc</span>
      %td toggle editing
    %tr
      %td <span class="key">backspace</span>, <span class="key">del</span>
      %td delete line
    %tr
      %td <span class="key">space</span>
      %td toggle complete
    %tr
      %td <span class="key">&#8593;</span>
      %td select previous line
    %tr
      %td <span class="key">&#8595;</span>
      %td select next line
    %tr
      %td <span class="key">ctrl</span> + <span class="key">&#8593;</span>
      %td move line up
    %tr
      %td <span class="key">ctrl</span> + <span class="key">&#8595;</span>
      %td move line down
    %tr
      %td <span class="key">x</span>
      %td indent
    %tr 
      %td <span class="key">z</span>
      %td outdent
